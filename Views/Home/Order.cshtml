@using LMU_EBurger.Models;
@model LMU_EBurger.Models.Order


@{
    ViewBag.Title = "Order";
    Layout = "~/Views/Shared/_MenuPageLayout.cshtml";
}

<main class="bg_gray">

    <div class="container margin_60_20">
        <div class="row justify-content-center">
            <div class="col-xl-6 col-lg-8">
                <div class="box_order_form">
                    <div class="head">
                        <div class="title">
                            <h3>Personal Details</h3>
                        </div>
                    </div>
                    <!-- /head -->
                    <div class="main">
                        @using (Html.BeginForm())
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <div class="form-group">
                            @Html.LabelFor(model => model.OrderType)
                            @Html.EditorFor(model => model.OrderType, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.OrderType, "", new { @class = "text-danger" })
                        </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.CreateAt, htmlAttributes: new { @class = "control-label col-md-2" })
                                @Html.EditorFor(model => model.CreateAt, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.CreateAt, "", new { @class = "text-danger" })
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.SubTotal, htmlAttributes: new { @class = "control-label col-md-2" })
                                @Html.EditorFor(model => model.SubTotal, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.SubTotal, "", new { @class = "text-danger" })
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.DeliveryFee, htmlAttributes: new { @class = "control-label col-md-2" })
                                @Html.EditorFor(model => model.DeliveryFee, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.DeliveryFee, "", new { @class = "text-danger" })
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.Total, htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.Total, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.Total, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.OrderStatus, htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.OrderStatus, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.OrderStatus, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <input type="submit" value="Create" class="btn btn-default" />
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <!-- /box_order_form -->
            </div>
            <!-- /col -->
            <div class="col-xl-4 col-lg-4" id="sidebar_fixed">
                <div class="box_order">
                    <div class="head">
                        <h3>Order Summary</h3>
                        <div>Pizzeria da Alfredo</div>
                    </div>
                    <!-- /head -->
                    <div class="main">
                        <ul>
                            <li>Date<span>@DateTime.Today.ToString("D")</span></li>
                            <li>Hour<span>@DateTime.Now.ToString("T")</span></li>
                        </ul>
                        <hr>
                        <ul class="clearfix">
                            @if (Session["Cart"] != null)
                            {
                                foreach (CartItem item in (List<CartItem>)Session["Cart"])
                                {
                                    <li><a href="@Url.Action("RemoveFromCart", "Home", new { MenuID = item.Menu.MenuID })">@item.Quantity x @item.Menu.Name</a><span>@item.Menu.Price.00 LKR</span></li>
                                }
                            }
                            else
                            {
                                <li class="text-center">
                                    Your Cart is Empty. Please add some items befor you place the order
                                </li>
                            }
                        </ul>

                        <ul class="clearfix">
                            @if (Session["Cart"] != null)
                            {
                                List<CartItem> cartItems = (List<CartItem>)Session["Cart"];
                                var total = cartItems.Sum(item => Int64.Parse(item.Menu.Price) * item.Quantity);
                                <li>Subtotal<span>@total.00 LKR</span></li>
                            }
                            else
                            {
                                <li>Subtotal<span>00.00 LKR</span></li>
                            }

                            <li>Delivery fee<span>$10</span></li>
                            <li class="total">Total<span>$66</span></li>
                        </ul>
                        <a href="confirm.html" class="btn_1 gradient full-width mb_5">Order Now</a>
                        <div class="text-center"><small>Or Call Us at <strong>0432 48432854</strong></small></div>
                    </div>
                </div>
                <!-- /box_booking -->
            </div>

        </div>
        <!-- /row -->
    </div>
    <!-- /container -->

</main>
<!-- /main -->
